<!doctype html>
<html lang="tr" class="h-full">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>SLP â€” Lark Style Player</title>
  <link rel="manifest" href="/manifest.json"/>
  <link rel="apple-touch-icon" href="/icons/icon-192.png"/>
  <meta name="theme-color" content="#0b1220"/>

  <!-- Tailwind (CDN for dev) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            accent: '#ff6b6b',
            accent2: '#ff9472',
            bgsoft: '#0b0f1a',
            panel: '#081026'
          },
          boxShadow: { soft: '0 10px 30px rgba(2,6,23,0.6)' },
          borderRadius: { 'full-xl': '1.25rem' }
        }
      }
    };
    // prevent FOUC
    (function(){ const t = localStorage.getItem('theme')||'dark'; if(t==='dark') document.documentElement.classList.add('dark'); })();
  </script>

  <style>
    /* extra small styling for player */
    .control-btn { width:52px; height:52px; display:inline-grid; place-items:center; border-radius:999px; }
    .control-btn--big { width:72px; height:72px; }
    input[type="range"]::-webkit-slider-thumb { -webkit-appearance:none; appearance:none; width:14px; height:14px; border-radius:50%; background:#fff; box-shadow:0 2px 6px rgba(0,0,0,.35); }
    input[type="range"]::-moz-range-thumb { width:14px; height:14px; border-radius:50%; background:#fff; border: none; }
    /* text ellipsis helper */
    .truncate-2 { display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; overflow:hidden; }
  </style>
</head>
<body class="min-h-screen bg-gradient-to-b from-slate-50 to-white dark:from-bgsoft dark:to-panel text-slate-900 dark:text-white">
  <div class="min-h-screen flex flex-col">
    <!-- header -->
    <header class="w-full border-b border-slate-200 dark:border-white/6 bg-white/80 dark:bg-bgsoft/80 backdrop-blur">
      <div class="max-w-5xl mx-auto px-4 py-3 flex items-center justify-between">
        <div class="flex items-center gap-3">
          <img src="/icons/icon-192.png" class="w-10 h-10 rounded-lg shadow-sm" alt="logo"/>
          <div>
            <div class="font-semibold text-lg">SLP</div>
            <div class="text-xs text-slate-500 dark:text-white/50">Lark-inspired Player</div>
          </div>
        </div>

        <div class="flex items-center gap-2">
          <button id="themeToggle" class="px-3 py-1.5 rounded-full bg-black/5 dark:bg-white/6">Tema: <span id="themeLabel">Koyu</span></button>
          <button id="installBtn" class="hidden px-3 py-1.5 rounded-full bg-accent text-white">YÃ¼kle</button>
        </div>
      </div>
    </header>

    <!-- main content area -->
    <main class="flex-1 max-w-5xl mx-auto w-full px-4 py-6">
      <div class="grid grid-cols-1 lg:grid-cols-[1fr,360px] gap-6">
        <!-- content (index.ejs injected here) -->
        <section class="space-y-4">
          <%- include(content) %>
        </section>

        <!-- right column: big player + playlists -->
        <aside class="sticky top-6">
          <div class="bg-white/70 dark:bg-white/3 rounded-2xl p-4 shadow-soft drop-shadow-sm">
            <!-- Big artwork & controls (Lark-like) -->
            <div class="flex flex-col items-center gap-4">
              <div id="bigArtWrap" class="w-56 h-56 rounded-2xl overflow-hidden bg-black/5">
                <img id="npArt" src="/icons/icon-512.png" class="w-full h-full object-cover"/>
              </div>

              <div class="text-center">
                <div id="npTitle" class="font-semibold truncate-2 max-w-[220px]">Ã‡alan yok</div>
                <div id="npArtist" class="text-sm text-slate-500 dark:text-white/60">â€”</div>
              </div>

              <div class="w-full">
                <div class="flex items-center gap-3 justify-center">
                  <button id="btnPrev" class="control-btn bg-white/5 hover:bg-white/10" title="Ã–nceki">
                    <!-- prev -->
                    <svg class="w-5 h-5" viewBox="0 0 24 24" fill="currentColor"><path d="M6 6v12l8.5-6L6 6zm10 0v12h2V6h-2z"/></svg>
                  </button>

                  <button id="btnRew" class="control-btn bg-white/5 hover:bg-white/10" title="-10s">-10</button>

                  <button id="btnPlay" class="control-btn control-btn--big bg-accent text-white shadow-lg transform active:scale-95" title="Oynat">
                    <svg id="playIcon" class="w-6 h-6" viewBox="0 0 24 24" fill="currentColor"><path d="M5 3v18l15-9z"/></svg>
                  </button>

                  <button id="btnFf" class="control-btn bg-white/5 hover:bg-white/10" title="+10s">+10</button>

                  <button id="btnNext" class="control-btn bg-white/5 hover:bg-white/10" title="Sonraki">
                    <svg class="w-5 h-5" viewBox="0 0 24 24" fill="currentColor"><path d="M13.5 12 5 19V5l8.5 7zM19 5v14h-2V5h2z"/></svg>
                  </button>
                </div>

                <div class="mt-4 flex items-center gap-3">
                  <span id="npCur" class="text-xs w-10 text-right">0:00</span>
                  <input id="seek" type="range" min="0" max="100" value="0" class="flex-1"/>
                  <span id="npDur" class="text-xs w-10">0:00</span>
                </div>

                <div class="mt-3 flex items-center justify-between text-xs text-slate-500 dark:text-white/50">
                  <div class="flex items-center gap-2">
                    <button id="btnRepeat" class="px-2 py-1 rounded-full bg-white/6">âŸ²</button>
                    <button id="btnShuffle" class="px-2 py-1 rounded-full bg-white/6">ðŸ”€</button>
                  </div>
                  <div>SLP</div>
                </div>
              </div>
            </div>
          </div>

          <!-- playlists / downloads panel -->
          <div class="mt-4 bg-white/60 dark:bg-white/3 rounded-2xl p-3 shadow-soft">
            <div class="flex items-center justify-between mb-2">
              <div class="text-sm font-medium">Ã‡alma Listeleri</div>
              <button id="newPlaylistBtn" class="text-xs px-2 py-1 rounded-full bg-accent text-white">Yeni</button>
            </div>
            <ul id="playlistList" class="space-y-2"></ul>
          </div>
        </aside>
      </div>
    </main>

    <footer class="py-6 text-center text-xs text-slate-500 dark:text-white/50">
      Â© <%= new Date().getFullYear() %> SLP â€” Lark-inspired skin
    </footer>
  </div>

  <audio id="audioEl" preload="metadata"></audio>

  <!-- app.js -->
  <script type="module" src="/js/app.js"></script>
</body>
</html>
